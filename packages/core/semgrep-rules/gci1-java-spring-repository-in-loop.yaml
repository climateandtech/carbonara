rules:
  - id: gci1-java-spring-repository-in-loop
    languages:
      - java
    severity: INFO
    message: >-
      The use of Spring repository in a loop induces unnecessary calculations by the CPU and therefore superfluous energy consumption.
      Also, the use of Spring repository in a stream operation like "peek, forEach, forEachOrdered, map" induces unnecessary multiple access to the database instead of single batch call.
      Consider using findAllById() for batch operations.
    patterns:
      - pattern-inside: |
          for ($TYPE $ID: $IDS) {
            ...
          }
      - pattern: $REPO.findById(...)
