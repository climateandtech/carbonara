{
  "name": "carbonara-vscode",
  "displayName": "Carbonara",
  "description": "Multi-Editor Plugin Architecture client for VS Code",
  "version": "0.1.1",
  "publisher": "carbonara",
  "icon": "icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/carbonara/carbonara"
  },
  "license": "To be clarified - All rights reserved",
  "engines": {
    "vscode": "^1.60.0"
  },
  "categories": [
    "Other",
    "Programming Languages",
    "Linters"
  ],
  "keywords": [
    "rpc",
    "plugin",
    "multi-editor"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "carbonara.showMenu",
        "title": "Show Carbonara Menu"
      },
      {
        "command": "carbonara.initProject",
        "title": "Initialize Carbonara Project"
      },
      {
        "command": "carbonara.runAssessment",
        "title": "Run CO2 Assessment"
      },
      {
        "command": "carbonara.analyzeWebsite",
        "title": "Analyze Website (Demo)"
      },
      {
        "command": "carbonara.viewData",
        "title": "View Data Lake"
      },
      {
        "command": "carbonara.showStatus",
        "title": "Show Project Status"
      },
      {
        "command": "carbonara.openConfig",
        "title": "Open Configuration"
      },
      {
        "command": "carbonara.editSection",
        "title": "Edit Section",
        "icon": "$(edit)"
      },
      {
        "command": "carbonara.completeAssessment",
        "title": "Complete Assessment",
        "icon": "$(check)"
      },
      {
        "command": "carbonara.refreshAssessment",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "carbonara.refreshData",
        "title": "Refresh Data",
        "icon": "$(refresh)"
      },
      {
        "command": "carbonara.exportDataJson",
        "title": "Export as JSON",
        "icon": "$(export)"
      },
      {
        "command": "carbonara.exportDataCsv",
        "title": "Export as CSV",
        "icon": "$(export)"
      },
      {
        "command": "carbonara.clearAllData",
        "title": "Clear All Data",
        "icon": "$(trash)"
      },
      {
        "command": "carbonara.openProject",
        "title": "Open Carbonara Project",
        "icon": "$(folder-opened)"
      },
      {
        "command": "carbonara.viewTools",
        "title": "View Analysis Tools"
      },
      {
        "command": "carbonara.refreshTools",
        "title": "Refresh Tools",
        "icon": "$(refresh)"
      },
      {
        "command": "carbonara.installTool",
        "title": "Install Tool",
        "icon": "$(cloud-download)"
      },
      {
        "command": "carbonara.analyzeTool",
        "title": "Analyze with Tool",
        "icon": "$(play)"
      },
      {
        "command": "carbonara.runSemgrep",
        "title": "Run Semgrep on Current File",
        "icon": "$(search)"
      },
      {
        "command": "carbonara.clearSemgrepResults",
        "title": "Clear Semgrep Results"
      },
      {
        "command": "carbonara.checkCliInstallation",
        "title": "Check Carbonara CLI Installation"
      },
      {
        "command": "carbonara.openWalkthrough",
        "title": "Open Walkthrough",
        "category": "Carbonara"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "carbonara",
          "title": "Carbonara",
          "icon": "icon.svg"
        }
      ]
    },
    "views": {
      "carbonara": [
        {
          "id": "carbonara.assessmentTree",
          "name": "CO2 Assessment",
          "icon": "$(checklist)"
        },
        {
          "id": "carbonara.dataTree",
          "name": "Data & Results",
          "icon": "$(database)"
        },
        {
          "id": "carbonara.toolsTree",
          "name": "Analysis Tools",
          "icon": "$(tools)",
          "visibility": "visible"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "carbonara.completeAssessment",
          "when": "view == carbonara.assessmentTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.refreshAssessment",
          "when": "view == carbonara.assessmentTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.refreshData",
          "when": "view == carbonara.dataTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.exportDataJson",
          "when": "view == carbonara.dataTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.exportDataCsv",
          "when": "view == carbonara.dataTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.clearAllData",
          "when": "view == carbonara.dataTree",
          "group": "navigation"
        },
        {
          "command": "carbonara.refreshTools",
          "when": "view == carbonara.toolsTree",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "carbonara.installTool",
          "when": "view == carbonara.toolsTree && viewItem == uninstalled-tool",
          "group": "inline"
        },
        {
          "command": "carbonara.analyzeTool",
          "when": "view == carbonara.toolsTree && (viewItem == installed-tool || viewItem == builtin-tool)",
          "group": "inline"
        }
      ],
      "editor/context": [
        {
          "command": "carbonara.runSemgrep",
          "group": "carbonara",
          "when": "editorTextFocus"
        }
      ],
      "commandPalette": [
        {
          "command": "carbonara.runSemgrep",
          "when": "editorIsOpen"
        }
      ]
    },
    "configuration": {
      "title": "Carbonara",
      "properties": {
        "carbonara.server.host": {
          "type": "string",
          "default": "localhost",
          "description": "Carbonara server host"
        },
        "carbonara.server.port": {
          "type": "number",
          "default": 3000,
          "description": "Carbonara server port"
        },
        "carbonara.autoConnect": {
          "type": "boolean",
          "default": true,
          "description": "Automatically connect to server on startup"
        },
        "carbonara.transport": {
          "type": "string",
          "enum": [
            "websocket",
            "http"
          ],
          "default": "websocket",
          "description": "Transport method for server communication"
        }
      }
    },
    "languages": [
      {
        "id": "typescript",
        "extensions": [
          ".ts",
          ".tsx"
        ]
      },
      {
        "id": "javascript",
        "extensions": [
          ".js",
          ".jsx"
        ]
      }
    ],
    "walkthroughs": [
      {
        "id": "getStarted",
        "title": "Carbon Reduction with Carbonara",
        "description": "Learn how to use Carbonara to assess and reduce your project's carbon footprint",
        "icon": "icon.svg",
        "primary": true,
        "steps": [
          {
            "id": "carbonara.setup",
            "title": "Setup & CLI Installation",
            "description": "First, let's make sure the Carbonara CLI is installed. The extension will automatically detect if Carbonara CLI is available in your environment. If not installed, you can install it globally using: `npm install -g @carbonara/cli`\n\nClick the button below to check your installation status.",
            "media": {
              "markdown": "media/setup.md"
            },
            "completionEvents": [
              "onCommand:carbonara.checkCliInstallation"
            ]
          },
          {
            "id": "carbonara.assessment",
            "title": "Complete Assessment Questionnaire",
            "description": "Run the CO2 assessment questionnaire to evaluate your project's carbon footprint. This interactive questionnaire collects information about your project's infrastructure, development practices, features, and sustainability goals.\n\nUse the 'Run CO2 Assessment' command or click the Carbonara icon in the status bar to get started.",
            "media": {
              "markdown": "media/assessment.md"
            },
            "completionEvents": [
              "onCommand:carbonara.runAssessment",
              "onCommand:carbonara.completeAssessment"
            ]
          },
          {
            "id": "carbonara.website",
            "title": "Test Your Website (Optional)",
            "description": "If you have a website, you can test it using Carbonara's built-in Site-Wide Diagnostics (SWD) analyzer. This tool estimates CO2 emissions from web page data transfer using the Sustainable Web Design model.\n\nUse the 'Analyze Website' command to test your website's carbon footprint.",
            "media": {
              "markdown": "media/website.md"
            },
            "completionEvents": [
              "onCommand:carbonara.analyzeWebsite"
            ]
          },
          {
            "id": "carbonara.builtin",
            "title": "Run Built-in Analysis Tools",
            "description": "Carbonara comes with built-in analysis tools ready to use. The Carbonara SWD Analyzer is available immediately without installation.\n\nOpen the 'Analysis Tools' view in the Carbonara sidebar to see available tools. Click on any built-in tool to run an analysis.",
            "media": {
              "markdown": "media/builtin.md"
            },
            "completionEvents": [
              "onCommand:carbonara.analyzeTool"
            ]
          },
          {
            "id": "carbonara.external",
            "title": "Install External Tools",
            "description": "Enhance your analysis by installing additional external tools like GreenFrame or Impact Framework. These tools provide more detailed sustainability metrics.\n\nIn the 'Analysis Tools' view, right-click on any uninstalled tool and select 'Install Tool' to add it to your toolkit.",
            "media": {
              "markdown": "media/external.md"
            },
            "completionEvents": [
              "onCommand:carbonara.installTool"
            ]
          },
          {
            "id": "carbonara.workflow",
            "title": "Snapshot & Compare Workflow",
            "description": "Use Carbonara's iterative improvement workflow:\n\n1. **Create a snapshot**: Run your first analysis (this automatically creates a snapshot of your current state)\n2. **Make improvements**: Based on the analysis results, implement optimizations in your project\n3. **Test again**: Run the analysis again to see the impact of your changes\n4. **Compare results**: View your data in the 'Data & Results' panel to compare before and after\n5. **Export (optional)**: Export your assessment data as JSON or CSV for external analysis\n\nRepeat this cycle to continuously improve your project's carbon footprint!",
            "media": {
              "markdown": "media/workflow.md"
            },
            "completionEvents": [
              "onCommand:carbonara.viewData"
            ]
          }
        ]
      }
    ]
  },
  "scripts": {
    "clean": "rm -rf dist",
    "build": "npm run clean && tsc -p ./ && npm run copy-deps",
    "copy-deps": "mkdir -p dist/node_modules/@carbonara/core dist/node_modules/sql.js dist/registry && cp -r ../../packages/core/dist dist/node_modules/@carbonara/core/ && cp ../../packages/core/package.json dist/node_modules/@carbonara/core/ && cp -r ../../packages/core/python dist/node_modules/@carbonara/core/ && cp -r ../../packages/core/semgrep dist/node_modules/@carbonara/core/ && cp -r ../../node_modules/sql.js/dist dist/node_modules/sql.js/ && cp ../../node_modules/sql.js/package.json dist/node_modules/sql.js/ && cp ../../packages/cli/dist/registry/tools.json dist/registry/tools.json",
    "watch": "tsc -watch -p ./",
    "package": "npm run build && vsce package --no-dependencies && vsce ls",
    "publish": "vsce publish",
    "install-extension": "code --install-extension ./carbonara-vscode-0.1.0.vsix",
    "test": "npm run test:ci-check",
    "test:local": "node ./dist/test/runTest.js",
    "test:ci-check": "if [ \"$CI\" = \"true\" ]; then echo 'Skipping VSCode tests in CI environment'; exit 0; else npm run test:local; fi",
    "test:ui": "playwright test e2e --workers=1",
    "test:ui:simple": "playwright test e2e/simple-ui.spec.ts --workers=1",
    "test:ui:comprehensive": "playwright test e2e/carbonara-ui-comprehensive.spec.ts --workers=1",
    "test:ui:workspace-scenarios": "playwright test e2e/workspace-scenarios.spec.ts --workers=1",
    "test:ui:empty-workspace": "playwright test e2e/workspace-scenarios.spec.ts --grep \"Empty workspace\" --workers=1",
    "test:ui:existing-project": "playwright test e2e/workspace-scenarios.spec.ts --grep \"existing project\" --workers=1",
    "test:ui:multiple-projects": "playwright test e2e/workspace-scenarios.spec.ts --grep \"Multiple projects\" --workers=1",
    "test:ui:semgrep": "playwright test e2e/semgrep.test.ts --workers=1",
    "test:ui:headed": "playwright test e2e --headed --workers=1",
    "playwright:install": "playwright install"
  },
  "dependencies": {
    "@carbonara/cli": "file:../../packages/cli",
    "@carbonara/core": "file:../../packages/core"
  },
  "devDependencies": {
    "@playwright/test": "^1.40.0",
    "@types/glob": "^8.1.0",
    "@types/mocha": "^10.0.1",
    "@types/node": "22.9.0",
    "@types/vscode": "^1.60.0",
    "@vscode/test-electron": "^2.5.2",
    "@vscode/vsce": "^3.6.2",
    "glob": "^11.0.3",
    "mocha": "^10.2.0",
    "playwright": "^1.40.0",
    "typescript": "^5.9.2"
  }
}
